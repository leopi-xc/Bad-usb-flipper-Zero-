Such a program already exists, but only for Windows. This one works on Linux.
The Windows is from https://github.com/UberGuidoZ
https://github.com/UberGuidoZ/Flipper/blob/main/BadUSB/GoodUSB.txt
